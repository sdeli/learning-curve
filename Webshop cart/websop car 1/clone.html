
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>clone cart</title>

    <!-- Bootstrap core CSS -->

    <!-- Custom styles for this template -->
    <link href="css/screen.css" rel="stylesheet">
    <style type="text/css">
      
      .total-parent{
       
        padding: 10px 0px;
      }
      .total-container p{
        display: inline;
      }

      table td, th{

        text-align: right;
      }
      table th{

        text-align: right;
      }
     
    </style>


  </head>

  <body>
    <header class="header">
      <div class="htop"></div>
      <div class="hbottom"></div>
    </header>
    <section><!--- Cehckout-->
      <div class="row">
        <div class="container total-parent">
          <div class="col-xs-12 col-md-8 total-container">
            <p> Subtotal (Items): <span></span></p>
            <a href="" id="proceesToCheckout" class="btn btn-warning">proceesToCheckout</a>
            <a href="" id="OpenShoppingCart" class="btn btn-success">OpenShoppingCart</a>
          </div>
        </div>
      </div>
    </section>
    <section class="content">
      <div class="container">

        <div class="row row-1">

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">Pixel 1</h3>
                <h6 class="card-sudtitle text-muted"></h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="pixel-1" data-price="45000" data-id="1">add to cart</a>
              </div>
            </div> 
          </div>

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">Pixel 2</h3><h6 class="card-sudtitle text-muted"></h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="pixel-2" data-price="35000" data-id="2">add to cart</a>
              </div>
            </div> 
          </div>

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">Pixelpad</h3><h6 class="card-sudtitle text-muted"></h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="pixel-3" data-price="25000" data-id="3">add to cart</a>
              </div>
            </div> 
          </div>

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">SD CARD-32GB</h3><h6 class="card-sudtitle text-muted"></h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="SD CARD-32GB" data-price="3000" data-id="4">add to cart</a>
              </div>
            </div> 
          </div>

        </div><!-- ROW-1-->

        <div class="row row-2">

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">SD CARD-32GB</h3><h6 class="card-sudtitle text-muted">asdasd</h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="SD CARD-32GB" data-price="7000" data-id="5">add to cart</a>
              </div>
            </div> 
          </div>

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">SD CARD-64GB</h3><h6 class="card-sudtitle text-muted">asdasd</h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="card-block">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="pixel-2" data-price="1000" data-id="6">add to cart</a>
              </div>
            </div> 
          </div>

          <div class="col-md-3">
            <div class="card">
              <div class="card-block">
                <h3 class="card-title">Pixelpad</h3><h6 class="card-sudtitle text-muted">asdasda</h6>
                <img src="http://placehold.it/350x150/E8117F" class="img-fluid">
              </div>
              <div class="Case">
                <p class="card-text"> Descsription - Lorem ipsum dolor sit amet, consectetur adipisicing elit, </p>
                <a href="" data-name="Case-1" data-price="9000" data-id="7">add to cart</a>
              </div>
            </div> 
          </div>

        </div><!-- ROW-1-->

      </div><!-- Container-->
    </section>
    <footer class="footer">
  
    </footer>  
    
      
<!-- MODAL *********************************************************************************************-->

<div class="modal fade" id="cart" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header"><button type="button" class="close" data-dismiss="modal">x</button><h4 class="modal-title">Modal title</h4></div>
      <div class="modal-body">
      <table class="table table-hover">
      <thead class="thead-inverse">
        <tr>
          <th>Qty</th>
          <th>Item</th>
          <th>Cost</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody id="output-table">
        <tr></tr>
      </tbody>
        
      </table>

      </div>
      <div class="modal-footer">fffff
      <button class="btn btn-warning" data-dismiss="modal">Continue shopping</button>
      <a href="checkout.html" class="btn btn-primary" data-dismiss="modal">Proceed to Checkout</a>
      </div>
      </div>
    </div>
  </div>
</div>

  
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha/js/bootstrap.min.js"></script>
 
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/script.js"></script>
    <script type="text/javascript" src="js/h3.js"></script>
    <script type="text/javascript">
      
     
      var shopCart=[];
      $(document).ready(function(){
          updateSessionStorage();
          console.log(updateSessionStorage());
        });
        /*$("#OpenShoppingCart")[0].addEventListener("click", function(){

              console.log("one");
              $("#output-table").html(updateSessionStorageInModal());
            });*/
         
        $(".item a").click(function(e){
          e.preventDefault();
          var itemToTheCart=e.target.dataset;
          itemToTheCart.qty=1;
          var inTheCart= false;

           $.each(shopCart, function(index, value){

            if(value.id===itemToTheCart.id){
              inTheCart= true;
              value.qty=parseInt(value.qty)+parseInt(itemToTheCart.qty);
            }

           });

         if (!inTheCart) {
            console.log("bent van");
            shopCart.push(itemToTheCart);
          }

          sessionStorage["sc"]=JSON.stringify(shopCart);
          
          $("total-container span").html(updateSessionStorage());
         updateSessionStorage();
         console.log(updateSessionStorage());
            
        });

      });

            function updateSessionStorage(){

              if(sessionStorage["sc"]){

              shopCart=JSON.parse(sessionStorage["sc"]);
              console.log("nagyobb volt")
              $(".total-parent").show(1000);
              }
              var outPutHtml="";
              var Total=0;
              var qty=0;

              $.each(shopCart, function(index, value){

                var subTotal=parseInt(value.qty)*parseInt(value.price);
                qty=parseInt(qty)+parseInt(value.qty)
                outPutHtml+="<div> Product: "+value.name+" "+ value.qty+" pieces - "+"<td> subTotal: "+currencyFormat(subTotal)+"</div>";
          

                Total=Total+subTotal;
              });

               outPutHtml+="<div>"+currencyFormat(Total)+"</div>";
               
               $(".total").html(currencyFormat(Total));
               console.log(qty);
               $(".items").html(qty);

              return {outPutHtml}; 
            };


            function currencyFormat(n){

              return "$" + (n/100).toFixed(2);

            }

             function updateSessionStorageInModal(){

              if(sessionStorage["sc"]){

              shopCart=JSON.parse(sessionStorage["sc"]);
              console.log("nagyobb volt")
              }
              var outPutHtmlTable="";
              var Total=0;
              var qty=0;

              $.each(shopCart, function(index, value){

                var subTotal=parseInt(value.qty)*parseInt(value.price);
                qty=parseInt(qty)+parseInt(value.qty)
                outPutHtmlTable+="<tr><td>"+value.qty+"</td><td>"+value.name+"</td><td>"+currencyFormat(value.price) +"</td><td>"+currencyFormat(subTotal)+"</td></tr>";
                /*$("#output-table").html(outPutHtmlTable);*/
                 

                Total=Total+subTotal;
              });
               outPutHtmlTable+="<tr><td colspan=\"3\"></td><td>Total: "+currencyFormat(Total)+"</td></tr>";
              console.log( outPutHtmlTable);

              return outPutHtmlTable; 
            };



           /* outPutHtml+="<tr><td>"value.qty+"</td><td>"+valu.name+"</td><td>"+value.price +"</td><td>"+currencyFormat(subTotal)+"</td></tr>";*/
    </script>
  </body>
</html>
